<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mid.repo.BoardDAO">



	


    <!-- 공지사항 1건 조회 -->
    <select id="NoticeBoard" parameterType="com.mid.model.BoardVO" resultType="com.mid.model.BoardVO">
        SELECT * FROM NOTICE
        WHERE NOTICE_NO = #{NOTICE_NO}
    </select>

    <!-- 공지사항 목록 조회 (페이징 및 검색 포함) -->
<select id="NoticeBoardList" parameterType="hashmap" resultType="com.mid.model.BoardVO">
  SELECT * FROM (
    SELECT ROWNUM rnum, A.* 
    FROM (
      SELECT * FROM NOTICE
      <where>
      
      <!-- 공지사항 검색 필터링 -->
        <choose>
        	<when test="searchCondition =='NOTICE_TITLE' and searchKeyword != null and searchKeyword != ''">
        		NOTICE_TITLE LIKE '%' || #{searchKeyword}||'%'
        
        	</when>
        	<when test="searchCondition =='NOTICE_CONTENT' and searchKeyword != null and searchKeyword != ''">
        		NOTICE_CONTENT LIKE '%' || #{searchKeyword}||'%'
        
        	</when>
        </choose>
      </where>
      ORDER BY NOTICE_NO DESC
    ) A
    WHERE ROWNUM &lt;= #{end}
  )
  WHERE rnum &gt;= #{start}
</select>
</mapper>